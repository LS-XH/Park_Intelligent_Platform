# 题目分析

### 模拟

- **初始化**，随机人、车辆数据（起点，终点）

- 模拟**车辆**向目的地行驶（宏观+微观）（避障，转弯，变道）

- 实时模拟**人流**热力图

- 模拟**突发事件**（手动，随机）

- 模拟红绿灯，施工，封路等**路况因素**

### ==控制==

- CAV：微观调控应用**CAV**，探究提速了多少，**对比**

- MAS：应用智能的MAS，调控**红绿灯**，**潮汐车道**等，探究提速了多少，**对比**

- 智能门闸：通过**门闸调节人群**，控制人流疏散，探究风险指数降低了多少，**对比**

- 智能路线规划：根据园区内人流密度规划合适的车辆园区内行进路线

- 智能园区大门：根据园区交通压力情况，**限制车辆入内**

### 分析

- 统计**车流量**，**人流量**密度

- **拥堵**风险预警，安全预警

- **异常**识别检测
     - 监测异常拥堵
     - 滞留人员
     - 门闸状态异常

- 可以对每个网络结点进行监控，分析路段的**热度**

- 统计分析数据，计算**峰值**时间，峰值地带等

# 流程规划

### 图初始化

- ### 读取

     - 点矩阵

     - 度矩阵
     - 限速矩阵

- ### 计算

     - 长度矩阵

     - 路口半径矩阵

     - 路向量基底矩阵
     - 路口转向路径矩阵

- ### 模拟

     - 红绿灯矩阵
     - 路权重矩阵

### 随机初始化

- #### 车辆

     - ##### 起始位置

          初始随机，之后的起始位置为上一次的目的地

     - ##### 目的地（园内，入园，出园）

          按照每个区域的热度加权随机

          

- #### 人

     - 随机位置

### 模拟

- #### 车辆

     通过控制加速度，向目的地行驶

- #### 人

     每片区域附加一个热度权重，人有权重的扩散

### 控制

- #### 车辆使用CAV

- #### MAS：红绿灯+智能调控

- #### 出入园区门闸智能调控

- #### *潮汐车道？

### 分析&呈现

- #### 平均速度

- #### 拥堵程度：流量/车道数（热力图）

- #### 危险预警（碰撞，人员滞留）



# 界面-功能

### 节点&边，选择：

若不选择节点或者边，则认为选中全局对象

### 控制功能勾选：

- 启用CAV（全局）
- 启用智能寻路（全局）
- 启用智能红绿灯（选择+全局）
- 启用智能门闸（全局）

### 滤镜（全局）

- 车流量情况
- 车辆拥堵情况
- 人流密度情况
- 车辆与人民碰撞风险程度

### 统计分析（选择+全局）（滤镜+时间戳）：

- 车流量统计表格
- 人流量统计表格
- 风险统计表格

# 程序设计

## 地图&道路设计

### 路口设计

- #### 道路微观摆放方式

     路口为一个圆，道路的id为

- #### 路口半径

     对于每个道路，tan最小的转折方式，即为半径最小，即为所求路口
     $$
     cos~\theta = \frac{l_1^2+l_2^2-l_3^2}{2l_1l_2}\\\\
     tan~\frac{\theta}{2} = \frac{sin~\theta}{1+cos~\theta} = \frac{\sqrt{1-(\frac{l_1^2+l_2^2-l_3^2}{2l_1l_2})^2}}{1+(\frac{l_1^2+l_2^2-l_3^2}{2l_1l_2})}\\\\
     cut_l = \frac{road_w}{2\tan~\frac{\theta}{2}}\\\\
     radius = \frac{road_w}{2\sin~\frac{\theta}{2}} = \frac{road_w}{2\sin~\frac{\theta}{2}}\\\\
     $$
     



